<!DOCTYPE html>
<html>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="https://rawgit.com/jasondavies/d3-cloud/master/build/d3.layout.cloud.js"></script>
<head>
    <title>Word Cloud</title>
</head>
<style>
    body {
        font-family:"Lucida Grande","Droid Sans",Arial,Helvetica,sans-serif;
    }
    .legend {
        border: 1px solid #555555;
        border-radius: 5px 5px 5px 5px;
        font-size: 0.8em;
        margin: 10px;
        padding: 8px;
    }
    .bld {
        font-weight: bold;
    }
</style>
<body>
    <option value="hotel"></option>
    <select id="myDropDown" name="hotel"></select>
    <div id="heading">
        <p id="p">Choose a specific hotel to see the word cloud.</p>
    </div>
</body>

<script type='text/javascript' src='data/Neg_Review.json'></script>
<script type='text/javascript' src='data/Pos_Review.json'></script>

<script>
    var selected_hotel = "Hotel Arena";
    function myList() {
        selected_hotel = this.value;
        console.log(selected_hotel);
        show_pos_review(selected_hotel);
        show_neg_review(selected_hotel);
    }
    document.getElementById("myDropDown").onchange = myList;
</script>

<body>
    <div id="paragraph1"></div>
</body>

<script>
    function show_pos_review(name) {
        var para = document.createElement("p");
        var node = document.createTextNode("Positive Reviews");
        para.appendChild(node);
        var element = document.getElementById("paragraph1");
        element.appendChild(para);

        var fill = d3.scale.category20();
        var width = 750;
        var height = 500;
        var hotel_name = name;
        var pos_data = Pos_Review[hotel_name];

        d3.layout.cloud().size([width, height])
                .words(pos_data)
                .padding(0)
                .rotate(function() { return ~~(Math.random() * 2 ) * 90; })
                .font("Impact")
                .fontSize(function(d) { return d.size; })
                .on("end", draw)
                .start();

        function draw(words) {
            d3.select("body").append("svg")
                    .attr("width", width)
                    .attr("height", height)
                    .attr("class", "wordcloud")
                    .append("g")
                    .attr("transform", "translate("+(width / 2)+","+(height / 2)+")")
                    .selectAll("text")
                    .data(words)
                    .enter().append("text")
                    .style("font-size", function(d) { return d.size + "px"; })
                    .style("fill", function(d, i) { return fill(i); })
                    .attr("transform", function(d) {
                        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                    })
                    .attr("text-anchor", "middle")
                    .text(function(d) { return d.text; });
        }
    }
</script>

<body>
    <div id="paragraph2"></div>
</body>

<script>
    var color = d3.scale.linear()
            .domain([0,1,2,3,4,5,6,10,15,20,100])
            // .range(["#ddd", "#ccc", "#bbb", "#aaa", "#999", "#888", "#777", "#666", "#555", "#444", "#333", "#222"])
            .range(["#222", "#333", "#444", "#555", "#666", "#777", "#888", "#999", "#aaa", "#bbb", "#ccc", "#ddd"]);

    function show_neg_review(name) {
        var para = document.createElement("p");
        var node = document.createTextNode("Negative Reviews");
        para.appendChild(node);
        var element = document.getElementById("paragraph2");
        element.appendChild(para);

        var fill = d3.scale.category20();
        var width = 750;
        var height = 500;
        var hotel_name = name;
        var neg_data = Neg_Review[hotel_name];

        d3.layout.cloud().size([width, height])
                .words(neg_data)
                .padding(0)
                .rotate(function() { return ~~(Math.random() * 2 ) * 90; })
                .font("Impact")
                .fontSize(function(d) { return d.size; })
                .on("end", draw)
                .start();

        function draw(words) {
            d3.select("body").append("svg")
                    .attr("width", width)
                    .attr("height", height)
                    .attr("class", "wordcloud")
                    .append("g")
                    .attr("transform", "translate("+(width / 2)+","+(height / 2)+")")
                    .selectAll("text")
                    .data(words)
                    .enter().append("text")
                    .style("font-size", function(d) { return d.size + "px"; })
                    .style("fill", function(d, i) { return color(i); })
                    .attr("transform", function(d) {
                        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                    })
                    .attr("text-anchor", "middle")
                    .text(function(d) { return d.text; });
        }
    }
    
</script>

<script> 
    var hotels = ["Hotel Arena", "K K Hotel George", "Apex Temple Court Hotel"]

    let dropdown = document.getElementById('myDropDown');
    dropdown.length = 0;

    let defaultOption = document.createElement('option');
    defaultOption.text = "Choose A Hotel";
    defaultOption.value = "Choose A Hotel";

    dropdown.add(defaultOption);
    dropdown.selectedIndex = 0;

    let option;
    for (let i = 0; i < hotels.length; i++) {
      option = document.createElement('option');
      option.text = hotels[i];
      option.value = hotels[i];
      dropdown.add(option);
    }

</script>



</html>